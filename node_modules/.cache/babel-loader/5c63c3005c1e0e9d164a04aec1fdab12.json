{"ast":null,"code":"/**\n * @module ol/control/Rotate\n */\nimport Control from './Control.js';\nimport EventType from '../events/EventType.js';\nimport { CLASS_CONTROL, CLASS_HIDDEN, CLASS_UNSELECTABLE } from '../css.js';\nimport { easeOut } from '../easing.js';\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-rotate'] CSS class name.\n * @property {string|HTMLElement} [label='⇧'] Text label to use for the rotate button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [tipLabel='Reset rotation'] Text label to use for the rotate tip.\n * @property {string} [compassClassName='ol-compass'] CSS class name for the compass.\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {boolean} [autoHide=true] Hide the control when rotation is 0.\n * @property {function(import(\"../MapEvent.js\").default):void} [render] Function called when the control should\n * be re-rendered. This is called in a `requestAnimationFrame` callback.\n * @property {function():void} [resetNorth] Function called when the control is clicked.\n * This will override the default `resetNorth`.\n * @property {HTMLElement|string} [target] Specify a target if you want the control to be\n * rendered outside of the map's viewport.\n */\n\n/**\n * @classdesc\n * A button control to reset rotation to 0.\n * To style this control use css selector `.ol-rotate`. A `.ol-hidden` css\n * selector is added to the button when the rotation is 0.\n *\n * @api\n */\n\nclass Rotate extends Control {\n  /**\n   * @param {Options} [options] Rotate options.\n   */\n  constructor(options) {\n    options = options ? options : {};\n    super({\n      element: document.createElement('div'),\n      render: options.render,\n      target: options.target\n    });\n    const className = options.className !== undefined ? options.className : 'ol-rotate';\n    const label = options.label !== undefined ? options.label : '\\u21E7';\n    const compassClassName = options.compassClassName !== undefined ? options.compassClassName : 'ol-compass';\n    /**\n     * @type {HTMLElement}\n     * @private\n     */\n\n    this.label_ = null;\n\n    if (typeof label === 'string') {\n      this.label_ = document.createElement('span');\n      this.label_.className = compassClassName;\n      this.label_.textContent = label;\n    } else {\n      this.label_ = label;\n      this.label_.classList.add(compassClassName);\n    }\n\n    const tipLabel = options.tipLabel ? options.tipLabel : 'Reset rotation';\n    const button = document.createElement('button');\n    button.className = className + '-reset';\n    button.setAttribute('type', 'button');\n    button.title = tipLabel;\n    button.appendChild(this.label_);\n    button.addEventListener(EventType.CLICK, this.handleClick_.bind(this), false);\n    const cssClasses = className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL;\n    const element = this.element;\n    element.className = cssClasses;\n    element.appendChild(button);\n    this.callResetNorth_ = options.resetNorth ? options.resetNorth : undefined;\n    /**\n     * @type {number}\n     * @private\n     */\n\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n    /**\n     * @type {boolean}\n     * @private\n     */\n\n    this.autoHide_ = options.autoHide !== undefined ? options.autoHide : true;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    this.rotation_ = undefined;\n\n    if (this.autoHide_) {\n      this.element.classList.add(CLASS_HIDDEN);\n    }\n  }\n  /**\n   * @param {MouseEvent} event The event to handle\n   * @private\n   */\n\n\n  handleClick_(event) {\n    event.preventDefault();\n\n    if (this.callResetNorth_ !== undefined) {\n      this.callResetNorth_();\n    } else {\n      this.resetNorth_();\n    }\n  }\n  /**\n   * @private\n   */\n\n\n  resetNorth_() {\n    const map = this.getMap();\n    const view = map.getView();\n\n    if (!view) {\n      // the map does not have a view, so we can't act\n      // upon it\n      return;\n    }\n\n    const rotation = view.getRotation();\n\n    if (rotation !== undefined) {\n      if (this.duration_ > 0 && rotation % (2 * Math.PI) !== 0) {\n        view.animate({\n          rotation: 0,\n          duration: this.duration_,\n          easing: easeOut\n        });\n      } else {\n        view.setRotation(0);\n      }\n    }\n  }\n  /**\n   * Update the rotate control element.\n   * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n   * @override\n   */\n\n\n  render(mapEvent) {\n    const frameState = mapEvent.frameState;\n\n    if (!frameState) {\n      return;\n    }\n\n    const rotation = frameState.viewState.rotation;\n\n    if (rotation != this.rotation_) {\n      const transform = 'rotate(' + rotation + 'rad)';\n\n      if (this.autoHide_) {\n        const contains = this.element.classList.contains(CLASS_HIDDEN);\n\n        if (!contains && rotation === 0) {\n          this.element.classList.add(CLASS_HIDDEN);\n        } else if (contains && rotation !== 0) {\n          this.element.classList.remove(CLASS_HIDDEN);\n        }\n      }\n\n      this.label_.style.transform = transform;\n    }\n\n    this.rotation_ = rotation;\n  }\n\n}\n\nexport default Rotate;","map":{"version":3,"names":["Control","EventType","CLASS_CONTROL","CLASS_HIDDEN","CLASS_UNSELECTABLE","easeOut","Rotate","constructor","options","element","document","createElement","render","target","className","undefined","label","compassClassName","label_","textContent","classList","add","tipLabel","button","setAttribute","title","appendChild","addEventListener","CLICK","handleClick_","bind","cssClasses","callResetNorth_","resetNorth","duration_","duration","autoHide_","autoHide","rotation_","event","preventDefault","resetNorth_","map","getMap","view","getView","rotation","getRotation","Math","PI","animate","easing","setRotation","mapEvent","frameState","viewState","transform","contains","remove","style"],"sources":["D:/Work/Learning/demo/node_modules/ol/control/Rotate.js"],"sourcesContent":["/**\n * @module ol/control/Rotate\n */\nimport Control from './Control.js';\nimport EventType from '../events/EventType.js';\nimport {CLASS_CONTROL, CLASS_HIDDEN, CLASS_UNSELECTABLE} from '../css.js';\nimport {easeOut} from '../easing.js';\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-rotate'] CSS class name.\n * @property {string|HTMLElement} [label='⇧'] Text label to use for the rotate button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [tipLabel='Reset rotation'] Text label to use for the rotate tip.\n * @property {string} [compassClassName='ol-compass'] CSS class name for the compass.\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {boolean} [autoHide=true] Hide the control when rotation is 0.\n * @property {function(import(\"../MapEvent.js\").default):void} [render] Function called when the control should\n * be re-rendered. This is called in a `requestAnimationFrame` callback.\n * @property {function():void} [resetNorth] Function called when the control is clicked.\n * This will override the default `resetNorth`.\n * @property {HTMLElement|string} [target] Specify a target if you want the control to be\n * rendered outside of the map's viewport.\n */\n\n/**\n * @classdesc\n * A button control to reset rotation to 0.\n * To style this control use css selector `.ol-rotate`. A `.ol-hidden` css\n * selector is added to the button when the rotation is 0.\n *\n * @api\n */\nclass Rotate extends Control {\n  /**\n   * @param {Options} [options] Rotate options.\n   */\n  constructor(options) {\n    options = options ? options : {};\n\n    super({\n      element: document.createElement('div'),\n      render: options.render,\n      target: options.target,\n    });\n\n    const className =\n      options.className !== undefined ? options.className : 'ol-rotate';\n\n    const label = options.label !== undefined ? options.label : '\\u21E7';\n\n    const compassClassName =\n      options.compassClassName !== undefined\n        ? options.compassClassName\n        : 'ol-compass';\n\n    /**\n     * @type {HTMLElement}\n     * @private\n     */\n    this.label_ = null;\n\n    if (typeof label === 'string') {\n      this.label_ = document.createElement('span');\n      this.label_.className = compassClassName;\n      this.label_.textContent = label;\n    } else {\n      this.label_ = label;\n      this.label_.classList.add(compassClassName);\n    }\n\n    const tipLabel = options.tipLabel ? options.tipLabel : 'Reset rotation';\n\n    const button = document.createElement('button');\n    button.className = className + '-reset';\n    button.setAttribute('type', 'button');\n    button.title = tipLabel;\n    button.appendChild(this.label_);\n\n    button.addEventListener(\n      EventType.CLICK,\n      this.handleClick_.bind(this),\n      false\n    );\n\n    const cssClasses =\n      className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL;\n    const element = this.element;\n    element.className = cssClasses;\n    element.appendChild(button);\n\n    this.callResetNorth_ = options.resetNorth ? options.resetNorth : undefined;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.autoHide_ = options.autoHide !== undefined ? options.autoHide : true;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.rotation_ = undefined;\n\n    if (this.autoHide_) {\n      this.element.classList.add(CLASS_HIDDEN);\n    }\n  }\n\n  /**\n   * @param {MouseEvent} event The event to handle\n   * @private\n   */\n  handleClick_(event) {\n    event.preventDefault();\n    if (this.callResetNorth_ !== undefined) {\n      this.callResetNorth_();\n    } else {\n      this.resetNorth_();\n    }\n  }\n\n  /**\n   * @private\n   */\n  resetNorth_() {\n    const map = this.getMap();\n    const view = map.getView();\n    if (!view) {\n      // the map does not have a view, so we can't act\n      // upon it\n      return;\n    }\n    const rotation = view.getRotation();\n    if (rotation !== undefined) {\n      if (this.duration_ > 0 && rotation % (2 * Math.PI) !== 0) {\n        view.animate({\n          rotation: 0,\n          duration: this.duration_,\n          easing: easeOut,\n        });\n      } else {\n        view.setRotation(0);\n      }\n    }\n  }\n\n  /**\n   * Update the rotate control element.\n   * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n   * @override\n   */\n  render(mapEvent) {\n    const frameState = mapEvent.frameState;\n    if (!frameState) {\n      return;\n    }\n    const rotation = frameState.viewState.rotation;\n    if (rotation != this.rotation_) {\n      const transform = 'rotate(' + rotation + 'rad)';\n      if (this.autoHide_) {\n        const contains = this.element.classList.contains(CLASS_HIDDEN);\n        if (!contains && rotation === 0) {\n          this.element.classList.add(CLASS_HIDDEN);\n        } else if (contains && rotation !== 0) {\n          this.element.classList.remove(CLASS_HIDDEN);\n        }\n      }\n      this.label_.style.transform = transform;\n    }\n    this.rotation_ = rotation;\n  }\n}\n\nexport default Rotate;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}